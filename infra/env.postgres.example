POSTGRES_DB=dragonsvault
POSTGRES_USER=dvapp
POSTGRES_PASSWORD=please_change_me_to_a_strong_password
DATABASE_URL=postgresql+psycopg2://dvapp:${POSTGRES_PASSWORD}@pgbouncer:6432/${POSTGRES_DB}

# Gunicorn sizing for 8C/16T box (tune as needed)
WEB_CONCURRENCY=12
WEB_THREADS=3
WEB_TIMEOUT=180
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=100

# Shared Redis cache
CACHE_TYPE=RedisCache
CACHE_REDIS_URL=redis://redis:6379/2
REDIS_URL=redis://redis:6379/0
RATELIMIT_STORAGE_URI=redis://redis:6379/1

# Security (enable when fronted by HTTPS terminator like Cloudflare)
ENABLE_TALISMAN=1
TALISMAN_FORCE_HTTPS=1
SESSION_COOKIE_SECURE=1
PREFERRED_URL_SCHEME=https

# Ops endpoint access (optional)
OPS_HEALTHCHECK_TOKEN=
OPS_HEALTHCHECK_ALLOWLIST=127.0.0.0/8,::1/128,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Django API security
DJANGO_SECRET_KEY=please_change_me_to_a_strong_secret
DJANGO_SECRET_KEY_FILE=/run/secrets/django_secret_key
DJANGO_ALLOWED_HOSTS=django-api,localhost,127.0.0.1,dragonsvault.app,www.dragonsvault.app
DJANGO_SECURE_SSL_REDIRECT=1
DJANGO_HSTS_SECONDS=31536000

# Secret keys can also be loaded from secret files (e.g., /run/secrets/flask_secret_key).
